def country = "nigera"

pipeline {
	agent {
           node { label 'master'}
        }
         withCredentials([sshUserPrivateKey(credentialsId: 'admin-creds', keyFileVariable: 'admin-creds', passphraseVariable: '', usernameVariable: 'admin-creds')]) {
         // some block
        }
        environment { 
               CC = 'cloud'
               AA = 'hey'
               KEY = credentials('jenkins-creds') //Calling credentials or secrets saved in jenkins UI
         }
        parameters {
           string(name:'WHO', defaultValue: 'lorence', description: 'nothing')
        }
        stages { 
	    stage('build') {
                   input {
                      message " Should we"
                      ok" yes"
                   }
                   when {
                       anyOf { 
                        environment name: 'CC', value: 'cloud'
                        environment name: 'AA', value: 'cloud' }
                   }
                   steps {
	             sh "echo ${country}" 
                     echo "${params.WHO}"
                     echo "$CC"
                     echo "$currentBuild.number"
                     echo "$admin-creds"                
                }                 
            }
       }
       post {
           failure { 
                  echo 'it failed' }
           always { echo "$KEY" }          
	}
        
}

